# Задание 1
### Описание
Моей любимой книгой в детстве был роман Мариам Петросян "Дом в котором".
Там очень много главных героев, я давно читала, но даже сейчас могу вспомнить персонажей 15 в подробностях, а второстепенных героев намного больше.
Попробую кратко описать сеттинг, чтобы было понятно, о чём данные, которые будут храниться в БД.

Основное место действия -- интернат для детей с ограниченными возможностями, они называют его Домом.
У всех детей разные заболевания, есть колясники, Неразумные (дети, отстающие в развитии), слепой, мальчик с 6 пальцами, безрукий, страдающий эпилепсией и многие другие.
Когда ребёнок попадает в Дом, у него появляется кличка, которая может со временем меняться, чаще всего так и происходит.
Настоящие имена детей мало кто знает, при прочтении становятся известны имена лишь некоторых обитателей Дома.

Все дети во времена основной сюжетной линии разделены на 5 групп, их ещё называют стаями: Первая(фазаны), Вторая(Крысы), Третья(Птицы), Четвёртая и Шестая(Псы).
Когда они были маленькими были ещё группы, например, Бандерлоги или Чумные дохляки. Затем дети из них распрделились по основным пяти группам.
Есть также информация про детей, живших при самом открытии Дома, а также про выпуск, предшествующий главным героям и про некоторые другие.

Помимо стай можно выделить группу работников Дома -- врачей, воспитателей, учителей, отдельно группу девочек (про них известно меньше), ещё есть люди из Наружности и из Изнанки.
Наружностью обитатели дома называют мир за пределами Дома.
Изнанка -- это обратная сторона Дома, грубо говоря некий потусторонний мир, другая вселенная.

В Изнанке живут люди, также туда могут попасть некоторые обитатели Дома.
Тех, кто может перемещаться в Изнанку по своему желанию называют Ходоками, а тех, кого туда забрасывает -- Прыгунами.

Книга заканчивается с выпуском главных героев из интерната.
Здесь много внимания уделяется вопросам, кто куда из ребят попал дальше.
Есть те, кто полностью перешли в Изнанку, есть Спящие, они в Изнанке, но их тело осталось в Доме (например, глава Дома позаботился о том, чтобы подобным образом 
перенесли всех Неразумных, ведь в Изнанке они просто маленькие дети и могут быть там счастливы), есть те, кто ушли в Наружность, кого-то забрали родители ещё до выпуска, двоё перешли на другой круг Дома (они переродятся и будут жить в следующем выпуске), некоторые уехали на автобусе.

Кажется, всё звучит довольно запутанно, но, надеюсь, общий смысл ясен.

### Версионность
Здесь есть данные, которые изменяются со временем, будем отсчитывать его таким образом:

Всё время поделено на выпуски, когда выпускаются одни (им к 18 в этот момент), в Доме появляются новые ребята (им по 6 лет), в этот же момент живут и другие дети (им по 12).
Каждый выпуск длится 12 лет, которые можно поделить на две части -- старшие и младшие.
Каждая из частей делится на 6 лет.

<table class="iksweb">
	<tbody>
		<tr>
			<td></td>
			<td colspan="6">Младшие</td>
			<td colspan="6">Старшие</td>
		</tr>
		<tr>
			<td>Лет ребёнку</td>
			<td>6</td>
			<td>7</td>
			<td>8</td>
			<td>9</td>
			<td>10</td>
			<td>11</td>
			<td>12</td>
			<td>13</td>
			<td>14</td>
			<td>15</td>
			<td>16</td>
			<td>17</td>
		</tr>
		<tr>
			<td>Год</td>
			<td>1</td>
			<td>2</td>
			<td>3</td>
			<td>4</td>
			<td>5</td>
			<td>6</td>
			<td>1</td>
			<td>2</td>
			<td>3</td>
			<td>4</td>
			<td>5</td>
			<td>6</td>
		</tr>
	</tbody>
</table>

За точку отсчёта будем брать выпуск главных героев, пусть он будет нулевой.

Итого, для обозначения времени можно говорить: выпуск -1, старшие, год 3.
Но это будет эквивалентно: выпуск 0, младшие, год 3.
Договоримся, что за временную точку будем брать старших, пусть это будет их время.

Например, один из главных героев имел кличку Вонючка, когда ему было от 6 до 10 лет, то есть в промежуток от выпуска -1, года 1 до выпуска -1 года 5.

### Сущности
В основе будут обитатели Дома. Они делятся на детей, работников Дома и остальных (здесь будут родители детей, люди из Наружности и Изнанки -- они тоже обитатели Дома в некотором смысле).
Дети собираются в стаи, у каждой из которых есть воспитатели, учителя.
Также все обитатели Дома делятся на группы по своему местоположению.
Так, например, ребёнок может уехать в наружность, или
находиться в данный момент в Доме и быть частью Стаи, но в то же время прыгать в Изнанку (их называют Спящими),
или же это может быть просто житель Наружности.

# Задание 2

## Пункт a
Концептуальная модель:

![](https://github.com/Fawentus/DatabaseProject/blob/main/DB1.png)

Каждый ребёнок в конкретный промежуток времени может быть только в одной стаи,
воспитателей и учителей у стаи может быть несколько. 

Стая может быть пуста, к примеру, Пятая. 

Работник может не относиться к конкретной стаи, например, врач, или же наоборот относиться к нескольким стаям одновременно, такое было с учителями.

Каждый обитатель Дома находится в одной из групп. Группы также могут не содержать людей одной из категорий, например, никто из работников Дома никогда не был в Изнанке.

## Пункт b
Логическая модель:

![](https://github.com/Fawentus/DatabaseProject/blob/main/DB2.png)

### Пояснения
`status` -- это способность перемещаться в Изнанку, её либо нет, либо человек Ходок, либо Прыгун

`symbol` -- это символ стаи, к примеру, у Шестой -- это Псы, а у Четвёртой его нет

`valid_[from|to]_g` -- это выпуск

`valid_[from|to]_y` -- это год

В `CHILD_CONSTANT` хранятся неизменяемые со временем данные о детях.

### Выбор нормальной формы
Выбрала 2НФ. 

3НФ нет из-за таблички `EMPLOYEE`.
В ней, к примеру, поле `name` зависит от неключевых полей `inhabitant_id`, `valid_from_g`, `valid_from_y`, `valid_t_g` и `valid_t_y`, что является подмножеством неключевых полей.

Этого можно было бы избежать, поступив, как в случае с `CHILD` (сделать ключевыми именно этот набор полей, а не вводить новое `employee_id`), или же разбив на две таблички.

Вариант с `CHILD` не подходит, потому что у `EMPLOYEE` есть связь с табличкой `PACK_X_EMPLOYEE`, а добавлять туда ключи из нескольких полей будет неудобно.
Вариант с разбитием на две таблички мне тоже кажется неудобным, так как табличка с id и датами не сильно информативна для пользователя и всё равно каждый раз при использовании придётся склеивать их вместе для получения имени, должности или группы -- действительно значимой информации.

### Выбор SCD
Выбрала SCD2, так как у нас нет никакой текущей версии, ощущение времени в романе довольно условно.
